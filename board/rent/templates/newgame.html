<html>
<head>

    {% extends "base.html" %}
    {% load static %}

    <link rel="stylesheet" type="text/css" href="{% static 'css/rent_style.css' %}">


</head>

<body>


{% block content %}
<!--<div class="container" style="width:600px;"> -->
<section class="form-register" style=" 
  width:  600px;
  background: #24303c;
  padding: 30px;
  margin: auto;
  border-radius: 8px;
  font-family: 'calibri';
  color: white;">

  <div><h3  class ="well well-sm"> {{texto}} </h3> </div>
  
    <div id="app">      
            <div><h6  class ="well well-sm">Los campos con * son obligatorios</h6> </div>
            <form method="POST" enctype="multipart/form-data" class="NewGame" style=" margin: 20px;
            padding: 5px">{% csrf_token %}
         
        <table>
          {% for field in form %}
            <tr style="height: 40px; width: 40px; color:white;">
              <div class="field">               
                <td style="color:white;"><label class="label">{{field.label}} </label></td>
                {% if field.label == "Precio (€/día)*" %}
                  <td><input name="precio" id="precio" v-model="precio" required></td>
                {% endif %}

                {% if field.label != "Precio (€/día)*" %}          
                  <td>{{field}}</td>
                {% endif %}
              </div>
            </tr>
          {% endfor %}
        </table>
          
        <div style="text-align:center; margin: 15px">
          {% if foto != True %}
          {% if request.user.premium == True %}
          <p class="text-warning">Su beneficio con este juego será de [[totalPremium]] €</p>
          <p class="text-warning">Sin Premium, ganaría [[totalPrecio]] €</p>
          {% else %}
          <p class="text-warning">Su beneficio con este juego será de [[totalPrecio]] €</p>
          <p class="text-warning">Consiguiendo suscripción premium, ganaría [[totalPremium]] €</p>
          {% endif %}

          <a href= "/games" class="btn btn-info btn-sm" style=" color: white; border-radius: 8px; margin-bottom: 30px; margin-top: 30px; font-weight: bold;">Volver</a>
 
          {% else %}
          <a href= "/myGames" class="btn btn-info btn-sm" style=" color: white; border-radius: 8px; margin-bottom: 30px; margin-top: 30px; font-weight: bold;">Volver</a>
 
        {% endif %}
          
          <button type="submit" class="btn btn-primary" style="border-radius: 8px">{{Alquilar}}</button>
        </div>

      </form>
      <div>
        {% if form.errors %}
            {% for field in form %}
                {% for error in field.errors %}
                    <div class="alert alert-danger">
                        <strong>{{ error|escape }}</strong>
                    </div>
                {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
                <div class="alert alert-danger">
                    <strong>{{ error|escape }}</strong>
                </div>
            {% endfor %}

        {% endif %}
    </div>
    </div>        
  </div>
</section>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script>
        const app = new Vue({
        delimiters: ['[[', ']]'],
        el: '#app',
        data: {
          precio: '',
          total:0
        },
        methods: {
        },
        computed: {
              totalPrecio(){
                  this.total = parseInt(this.precio) - parseInt(this.precio)* 0.2;
                  if(isNaN(this.total)){
                    this.total=0;
                  }
                  return this.total;
                  
              },
              totalPremium(){
                  this.total = parseInt(this.precio) - parseInt(this.precio)* 0.15;
                  if(isNaN(this.total)){
                    this.total=0;
                  }
                  return this.total;
              }
          }
      })
    </script>
 

{% endblock %}


</body>
</html>